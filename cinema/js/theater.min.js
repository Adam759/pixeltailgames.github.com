function getPlayerByType(e){return players[e]}function registerPlayer(e,t){t.prototype.player=null;t.prototype.lastVideoId=null;t.prototype.videoId=null;t.prototype.lastVolume=null;t.prototype.volume=.123;t.prototype.currentTime=0;t.prototype.getCurrentTime=function(){return null};t.prototype.lastStartTime=0;t.prototype.startTime=0;t.prototype.type=e;t.prototype.getType=function(){return this.type};players[e]=t}function onYouTubePlayerReady(e){var t=theater.getPlayer();if(t&&(t.getType()=="youtube"||t.getType()=="youtubelive")){t.onReady()}}function livestreamPlayerCallback(e,t){if(e=="ready"){var n=theater.getPlayer();if(n&&n.getType()=="livestream"){n.onReady()}}}var theater={closedCaptions:false,hdPlayback:false,language:"en",player:null,volume:25,getPlayerContainer:function(){return document.getElementById("player-container")},resetPlayer:function(){if(this.player){this.player.onRemove();delete this.player}this.getPlayerContainer().innerHTML="<div id='player'></div>"},enablePlayer:function(){var e=this.getPlayerContainer();e.style.display="block";var t=document.getElementById("content");t.style.display="none"},disablePlayer:function(){var e=this.getPlayerContainer();e.style.display="none";this.resetPlayer();var t=document.getElementById("content");t.style.display="block"},getPlayer:function(){return this.player},loadVideo:function(e,t,n){if(swfobject&&!swfobject.hasFlashPlayerVersion("1"))return;if(e==null||t==null)return;if(e==""){this.disablePlayer();return}n=Math.max(0,n);var r=this.getPlayer();if(r==null||r.getType()!=e){this.resetPlayer();this.enablePlayer();var i=getPlayerByType(e);if(i!=null){this.player=new i}else{this.getPlayerContainer().innerText="Video type not yet implemented.";return}}this.player.setVolume(this.volume!=null?this.volume:25);this.player.setStartTime(n||0);this.player.setVideo(t)},setVolume:function(e){this.volume=e;if(this.player!=null){this.player.setVolume(e)}},seek:function(e){var t=this.getPlayer();if(t){t.seek(e)}},enableHD:function(){this.hdPlayback=true},isHDEnabled:function(){return this.hdPlayback},sync:function(e){if(e==null)return;if(this.player!=null){var t=this.player.getCurrentTime();if(t!=null&&Math.abs(e-t)>5){this.player.setStartTime(e)}}},setLanguage:function(e){this.language=e},enableCC:function(){this.closedCaptions=true},isCCEnabled:function(){return this.closedCaptions},clickPlayerCenter:function(){var e=document.createEvent("MouseEvents");var t=document.getElementById("player");var n=t.clientWidth/2,r=t.clientHeight/2;e.initMouseEvent("click",true,true,window,0,0,0,n,r,false,false,false,false,0,null);this.getPlayer().dispatchEvent(e)}};var players=[];(function(){var e=function(){var e={allowScriptAccess:"always",bgcolor:"#000000",wmode:"opaque"};var t={id:"player"};var n="http://www.youtube.com/apiplayer?enablejsapi=1&playerapiid=player&version=3";if(theater.isCCEnabled()){n+="&cc_load_policy=1";n+="&yt:cc=on"}swfobject.embedSWF(n,"player","100%","100%","9",null,null,e,t);this.setVideo=function(e){this.lastStartTime=null;this.lastVideoId=null;this.videoId=e};this.setVolume=function(e){this.lastVolume=null;this.volume=e};this.setStartTime=function(e){this.lastStartTime=null;this.startTime=e};this.seek=function(e){if(this.player!=null){this.player.seekTo(e,true);if(this.player.getPlayerState()!=1){this.player.playVideo()}}};this.onRemove=function(){clearInterval(this.interval)};this.getCurrentTime=function(){if(this.player!=null){return this.player.getCurrentTime()}};this.canChangeTime=function(){if(this.player!=null){return this.player.getVideoBytesTotal()!=-1&&this.player.getPlayerState()!=3}};this.think=function(){if(this.player!=null){if(this.videoId!=this.lastVideoId){this.player.loadVideoById(this.videoId,this.startTime);this.lastVideoId=this.videoId;this.lastStartTime=this.startTime}if(this.player.getPlayerState()!=-1){if(this.startTime!=this.lastStartTime){this.seek(this.startTime);this.lastStartTime=this.startTime}if(this.volume!=this.player.getVolume()){this.player.setVolume(this.volume);this.volume=this.player.getVolume()}}}};this.onReady=function(){this.player=document.getElementById("player");if(theater.isHDEnabled()){this.player.setPlaybackQuality("hd720")}var e=this;this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("youtube",e);registerPlayer("youtubelive",e);var t=function(){var e=this;this.froogaloop=null;this.setVideo=function(e){this.videoId=e;var t=document.getElementById("player1");if(t){$f(t).removeEvent("ready");this.froogaloop=null;t.parentNode.removeChild(t)}var n="http://player.vimeo.com/video/"+e+"?api=1&player_id=player1";var r=document.createElement("iframe");r.setAttribute("id","player1");r.setAttribute("src",n);r.setAttribute("width","100%");r.setAttribute("height","100%");r.setAttribute("frameborder","0");document.getElementById("player").appendChild(r);$f(r).addEvent("ready",this.onReady)};this.setVolume=function(e){this.lastVolume=null;this.volume=e/100};this.setStartTime=function(e){this.lastStartTime=null;this.startTime=Math.max(1,e)};this.seek=function(e){if(this.froogaloop!=null&&e>1){this.froogaloop.api("seekTo",e)}};this.onRemove=function(){this.froogaloop=null;clearInterval(this.interval)};this.think=function(){if(this.froogaloop!=null){if(this.volume!=this.lastVolume){this.froogaloop.api("setVolume",this.volume);this.lastVolume=this.volume}if(this.startTime!=this.lastStartTime){this.seek(this.startTime);this.lastStartTime=this.startTime}this.froogaloop.api("getVolume",function(t){e.volume=parseFloat(t)});this.froogaloop.api("getCurrentTime",function(t){e.currentTime=parseFloat(t)})}};this.onReady=function(t){e.lastStartTime=null;e.froogaloop=$f(t);e.froogaloop.api("play");e.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("vimeo",t);var n=function(){var e=this;this.videoInfo={};this.embed=function(){if(!this.videoInfo.channel)return;if(!this.videoInfo.archive_id)return;var e={hostname:"www.twitch.tv",channel:this.videoInfo.channel,auto_play:true,start_volume:this.videoInfo.volume||theater.volume,initial_time:this.videoInfo.initial_time||0};var t=this.videoInfo.archive_id.slice(1);var n=this.videoInfo.archive_id.substr(0,1);if(n=="c"){e.chapter_id=t}else{e.archive_id=t}var r="http://www.twitch.tv/widgets/archive_site_player.swf";r+="?channel="+e.channel;var i={allowFullScreen:"true",allowNetworking:"all",allowScriptAccess:"always",movie:r,wmode:"opaque",bgcolor:"#000000"};swfobject.embedSWF(r,"player","100%","104%","9.0.0",false,e,i)};this.setVideo=function(t){this.lastVideoId=null;this.videoId=t;var n=t.split(",");this.videoInfo.channel=n[0];this.videoInfo.archive_id=n[1];if(this.player==null){this.lastVideoId=this.videoId;this.embed();var r=0;var i=setInterval(function(){var t=document.getElementById("player");if(t.play_video){clearInterval(i);e.onReady()}r++;if(r>100){console.log("Error waiting for player to load");clearInterval(i)}},33)}};this.setVolume=function(e){this.lastVolume=null;this.volume=e;this.videoInfo.volume=e};this.setStartTime=function(e){this.lastStartTime=null;this.startTime=e;this.videoInfo.initial_time=e};this.seek=function(e){this.setStartTime(e)};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player){if(this.videoId!=this.lastVideoId){this.embed();this.lastVideoId=this.videoId}if(this.startTime!=this.lastStartTime){this.embed();this.lastStartTime=this.startTime}if(this.volume!=this.lastVolume){this.lastVolume=this.volume}}};this.onReady=function(){this.player=document.getElementById("player");this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("twitch",n);var r=function(){var e=this;this.embed=function(){var e={hostname:"www.twitch.tv",channel:this.videoId,auto_play:true,start_volume:this.volume||25};var t="http://www.twitch.tv/widgets/live_embed_player.swf";var n={allowFullScreen:"true",allowNetworking:"all",allowScriptAccess:"always",movie:t,wmode:"opaque",bgcolor:"#000000"};swfobject.embedSWF(t,"player","100%","104%","9.0.0",false,e,n)};this.setVideo=function(t){this.lastVideoId=null;this.videoId=t;if(this.player==null){this.lastVideoId=this.videoId;this.embed();var n=0;var r=setInterval(function(){var t=document.getElementById("player");if(t.mute){clearInterval(r);e.onReady()}n++;if(n>100){console.log("Error waiting for player to load");clearInterval(r)}},33)}};this.setVolume=function(e){};this.setStartTime=function(e){};this.seek=function(e){};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player){if(this.videoId!=this.lastVideoId){this.embed();this.lastVideoId=this.videoId}}};this.onReady=function(){this.player=document.getElementById("player");this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("twitchstream",r);var i=function(){var e=this;this.embed=function(){var e={publisherGuard:"null",hide_chat:true,channel:this.videoId,auto_play:true,start_volume:this.volume||25};var t="http://www-cdn.justin.tv/widgets/live_site_player.swf";var n={allowFullScreen:"true",allowNetworking:"all",allowScriptAccess:"always",movie:t,wmode:"opaque",bgcolor:"#000000"};swfobject.embedSWF(t,"player","100%","104%","9.0.0",false,e,n)};this.setVideo=function(t){this.lastVideoId=null;this.videoId=t;if(this.player==null){this.lastVideoId=this.videoId;this.embed();var n=0;var r=setInterval(function(){var t=document.getElementById("player");if(t.mute){clearInterval(r);e.onReady()}n++;if(n>500){console.log("Error waiting for player to load");clearInterval(r)}},33)}};this.setVolume=function(e){};this.setStartTime=function(e){};this.seek=function(e){};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player){if(this.videoId!=this.lastVideoId){this.embed();this.lastVideoId=this.videoId}}};this.onReady=function(){this.player=document.getElementById("player");this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("justinstream",i);var s=function(){var e=this;this.lastState=null;this.state=null;var t={autostart:true,noads:true,showinfo:false,onsite:true,nopostroll:true,noendcap:true,showsharebutton:false,removebrandlink:true,skin:"BlipClassic",backcolor:"0x000000",floatcontrols:true,fixedcontrols:true,largeplaybutton:false,controlsalpha:".0",autohideidle:1e3,file:"http://blip.tv/rss/flash/123123123123"};var n={allowFullScreen:"true",allowNetworking:"all",allowScriptAccess:"always",wmode:"opaque",bgcolor:"#000000"};swfobject.embedSWF("http://blip.tv/scripts/flash/stratos.swf","player","100%","100%","9.0.0",false,t,n);this.setVideo=function(t){this.lastVideoId=null;this.videoId=t;if(this.player==null){var n=0;var r=setInterval(function(){var t=document.getElementById("player");if(t.addJScallback){clearInterval(r);e.onReady()}n++;if(n>100){console.log("Error waiting for player to load");clearInterval(r)}},33)}else{this.player.sendEvent("pause")}};this.setVolume=function(e){this.lastVolume=null;this.volume=e/100};this.setStartTime=function(e){this.lastStartTime=null;this.startTime=e};this.seek=function(e){if(this.player!=null){this.player.sendEvent("seek",e)}};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player!=null){if(this.videoId!=this.lastVideoId){this.player.sendEvent("newFeed","http://blip.tv/rss/flash/"+this.videoId);this.lastVideoId=this.videoId;this.lastVolume=null;this.lastStartTime=null}if(this.player.getCurrentState()=="playing"){if(this.startTime!=this.lastStartTime){this.seek(this.startTime);this.lastStartTime=this.startTime}if(this.volume!=this.lastVolume){this.player.sendEvent("volume",this.volume);this.lastVolume=this.volume}}}};this.onReady=function(){this.player=document.getElementById("player");this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("blip",s);var o=function(){var e=this;this.embed=function(){var e=document.getElementById("player1");if(e){e.parentNode.removeChild(e)}var t=document.createElement("iframe");t.setAttribute("id","player1");t.setAttribute("src",this.videoId);t.setAttribute("width","100%");t.setAttribute("height","100%");t.setAttribute("frameborder","0");document.getElementById("player").appendChild(t)};this.setVideo=function(t){this.lastVideoId=null;this.videoId=t;if(this.player==null){this.lastVideoId=this.videoId;this.embed();var n=0;var r=setInterval(function(){var t=document.getElementById("player");if(t){clearInterval(r);e.onReady()}n++;if(n>100){console.log("Error waiting for player to load");clearInterval(r)}},33)}};this.setVolume=function(e){};this.setStartTime=function(e){};this.seek=function(e){};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player){if(this.videoId!=this.lastVideoId){this.embed();this.lastVideoId=this.videoId}}};this.onReady=function(){this.player=document.getElementById("player");this.interval=setInterval(function(){e.think(e)},100)}};registerPlayer("url",o);var u=function(){var e={};var t="http://cdn.livestream.com/chromelessPlayer/wrappers/JSPlayer.swf";var n={allowNetworking:"all",allowScriptAccess:"always",movie:t,wmode:"opaque",bgcolor:"#000000"};swfobject.embedSWF(t,"player","100%","100%","9.0.0","expressInstall.swf",e,n);this.setVideo=function(e){this.lastVideoId=null;this.videoId=e};this.setVolume=function(e){this.lastVolume=null;this.volume=e/100};this.setStartTime=function(){};this.seek=function(e){};this.onRemove=function(){clearInterval(this.interval)};this.think=function(){if(this.player!=null){if(this.videoId!=this.lastVideoId){this.player.load(this.videoId);this.player.startPlayback();this.lastVideoId=this.videoId}if(this.volume!=this.lastVolume){this.player.setVolume(this.volume);this.lastVolume=this.volume}}};this.onReady=function(){this.player=document.getElementById("player");var e=this;this.interval=setInterval(function(){e.think(e)},100);this.player.setVolume(this.volume)}};registerPlayer("livestream",u);var a=function(){this.embed=function(){var e=document.getElementById("player1");if(e){e.parentNode.removeChild(e)}var t=document.createElement("div");t.setAttribute("id","player1");t.style.width="100%";t.style.height="100%";t.innerHTML=this.videoId;document.getElementById("player").appendChild(t)};this.setVideo=function(e){this.lastVideoId=null;this.videoId=e;this.embed()};this.setVolume=function(e){};this.setStartTime=function(e){};this.seek=function(e){};this.onRemove=function(){}};registerPlayer("html",a)})()